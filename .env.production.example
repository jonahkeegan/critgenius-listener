# ===========================================
# CritGenius Listener - Production Environment Configuration
# ===========================================
# Copy this file to .env.production for production deployment
# This configuration enforces maximum security and performance

# Node.js Environment
NODE_ENV=production
PORT=3100
CLIENT_PORT=3101
HOST=0.0.0.0

# AssemblyAI Configuration
# Production API key REQUIRED - get from: https://www.assemblyai.com/
ASSEMBLYAI_API_KEY=your_production_assemblyai_api_key_here
ASSEMBLYAI_WEBHOOK_URL=https://api.critgenius-listener.com/api/webhooks/assemblyai

# Database Configuration (Production - SSL REQUIRED)
MONGODB_URI=mongodb+srv://username:password@production-cluster.mongodb.net/critgenius-listener?retryWrites=true&w=majority&ssl=true
MONGODB_DB_NAME=critgenius-listener
REDIS_URL=rediss://username:password@production-redis.cloud.redislabs.com:6379
REDIS_PASSWORD=your_strong_redis_password_here
REDIS_DB=0

# CritGenius Ecosystem URLs (Production)
CRITGENIUS_ECOSYSTEM_BASE_URL=https://ecosystem.critgenius.com
CRITGENIUS_PROMPTER_URL=https://prompter.critgenius.com
CRITGENIUS_LLM_URL=https://llm.critgenius.com
CRITGENIUS_PUBLISHER_URL=https://publisher.critgenius.com
CRITGENIUS_ECOSYSTEM_API_KEY=production_ecosystem_api_key_here
CRITGENIUS_SERVICE_TOKEN=production_service_token_here

# Security Configuration (Production - MAXIMUM SECURITY)
JWT_SECRET=production_jwt_secret_minimum_32_characters_strong_random_string_here
JWT_EXPIRES_IN=7d
CORS_ORIGINS=https://critgenius-listener.com,https://app.critgenius.com
CSP_ENABLED=true
HELMET_ENABLED=true
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Audio Processing Configuration
MAX_AUDIO_FILE_SIZE=52428800
MAX_AUDIO_DURATION=3600
SUPPORTED_AUDIO_FORMATS=wav,mp3,m4a,flac,ogg

# Session Configuration (Production Limits)
SESSION_TIMEOUT=60
MAX_CONCURRENT_SESSIONS=10

# Export Configuration (Secure Paths)
EXPORT_TEMP_DIR=/var/lib/critgenius-listener/exports
EXPORT_MAX_SIZE=104857600

# Data Retention Configuration (Compliance)
AUTO_CLEANUP_ENABLED=true
CLEANUP_INTERVAL_HOURS=24
DEFAULT_RETENTION_DAYS=30

# Privacy Configuration (GDPR/CCPA COMPLIANCE REQUIRED)
GDPR_ENABLED=true
DATA_ANONYMIZATION_ENABLED=true
CONSENT_REQUIRED=true

# Logging Configuration (Production Structured Logging)
LOG_LEVEL=warn
LOG_FORMAT=json
LOG_FILE_PATH=/var/log/critgenius-listener/app.log

# Performance Configuration (Optimized)
WS_HEARTBEAT_INTERVAL=30000
WS_MAX_CONNECTIONS=100
CACHE_TTL=300
CACHE_MAX_SIZE=1000

# Monitoring Configuration (REQUIRED)
HEALTH_CHECK_ENABLED=true
METRICS_ENABLED=true
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/production/alert/webhook
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/production/alert/webhook

# Development Configuration (DISABLED)
DEBUG=
DEBUG_SQL=false
DEBUG_REDIS=false
HOT_RELOAD=false
WATCH_FILES=false

# Testing Configuration (Production Test DB)
TEST_MONGODB_URI=mongodb+srv://username:password@production-cluster.mongodb.net/critgenius-listener-test?retryWrites=true&w=majority&ssl=true
TEST_REDIS_URL=rediss://username:password@production-redis.cloud.redislabs.com:6380
MOCK_ASSEMBLYAI=false
MOCK_ECOSYSTEM_SERVICES=false

# Production Configuration (SSL/TLS REQUIRED)
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/critgenius-listener.com.crt
SSL_KEY_PATH=/etc/ssl/private/critgenius-listener.com.key
CSP_REPORT_URI=/api/csp-report

# ===========================================
# Production Environment Requirements
# ===========================================

# CRITICAL SECURITY REQUIREMENTS:
# 1. All database connections MUST use SSL/TLS
# 2. SSL certificates MUST be valid and properly configured
# 3. JWT secret MUST be minimum 32 characters, cryptographically random
# 4. All API keys MUST be production-grade with appropriate permissions
# 5. CORS origins MUST be restrictive (only production domains)
# 6. All passwords MUST be strong and unique
# 7. Rate limiting MUST be enabled and properly configured
# 8. All security headers MUST be enabled (Helmet, CSP)

# COMPLIANCE REQUIREMENTS:
# 1. GDPR compliance features MUST be enabled
# 2. Data anonymization MUST be enabled
# 3. User consent MUST be required
# 4. Data retention policies MUST be enforced
# 5. Audit logging MUST be enabled
# 6. Privacy-first data handling MUST be enforced

# MONITORING REQUIREMENTS:
# 1. Health checks MUST be enabled
# 2. Metrics collection MUST be enabled
# 3. Alert webhooks MUST be configured
# 4. Log aggregation MUST be configured
# 5. Performance monitoring MUST be enabled
# 6. Error tracking MUST be configured

# PERFORMANCE REQUIREMENTS:
# 1. Response times MUST be under 500ms
# 2. Uptime MUST be 99.9% or higher
# 3. Concurrent user limits MUST be enforced
# 4. Resource usage MUST be monitored
# 5. Auto-scaling MUST be configured
# 6. Load balancing MUST be enabled

# DEPLOYMENT CHECKLIST (ALL REQUIRED):
# □ SSL certificates installed and valid (Let's Encrypt or commercial)
# □ Database connections secured with SSL/TLS
# □ All secrets generated with cryptographically secure methods
# □ All API keys are production-grade with minimal required permissions
# □ Monitoring and alerting fully configured and tested
# □ CORS origins restricted to production domains only
# □ Rate limiting configured and tested
# □ Security headers validated (use securityheaders.com)
# □ GDPR compliance features enabled and tested
# □ Data retention policies configured and automated
# □ Backup and disaster recovery procedures tested
# □ Load testing completed and performance validated
# □ Security audit completed by qualified security professional
# □ Incident response procedures documented and team trained

# SECURITY NOTICE:
# This is a PRODUCTION configuration with maximum security requirements.
# Any deviation from these security requirements may result in vulnerabilities.
# All configuration changes must be reviewed by security team.
# Regular security audits are mandatory.
# All secrets must be rotated according to security policy.

# COMPLIANCE NOTICE:
# This configuration enables GDPR/CCPA compliance features.
# Legal review of data handling practices is required.
# Privacy impact assessment must be completed.
# Data processing agreements must be in place.
